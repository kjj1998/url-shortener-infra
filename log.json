kubectl logs -n kube-system aws-load-balancer-controller-6d7cf84795-vlwvg
{"level":"info","ts":"2024-05-25T07:03:30Z","msg":"version","GitVersion":"v2.8.0","GitCommit":"6afa4042433bd7b92b7ceb7807e99b51c0c3af23","BuildDate":"2024-05-17T20:09:33+0000"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"controller-runtime.metrics","msg":"Metrics server is starting to listen","addr":":8080"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"setup","msg":"adding health check for controller"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"setup","msg":"adding readiness check for webhook"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/mutate-v1-pod"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/mutate-v1-service"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-elbv2-k8s-aws-v1beta1-ingressclassparams"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/mutate-elbv2-k8s-aws-v1beta1-targetgroupbinding"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-elbv2-k8s-aws-v1beta1-targetgroupbinding"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-networking-v1-ingress"}
{"level":"info","ts":"2024-05-25T07:03:30Z","logger":"setup","msg":"starting podInfo repo"}
{"level":"info","ts":"2024-05-25T07:03:32Z","logger":"controller-runtime.webhook.webhooks","msg":"Starting webhook server"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting server","kind":"health probe","addr":"[::]:61779"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting server","path":"/metrics","kind":"metrics","addr":"[::]:8080"}
{"level":"info","ts":"2024-05-25T07:03:32Z","logger":"controller-runtime.certwatcher","msg":"Updated current TLS certificate"}
{"level":"info","ts":"2024-05-25T07:03:32Z","logger":"controller-runtime.webhook","msg":"Serving webhook server","host":"","port":9443}
{"level":"info","ts":"2024-05-25T07:03:32Z","logger":"controller-runtime.certwatcher","msg":"Starting certificate watcher"}
I0525 07:03:32.285753       1 leaderelection.go:248] attempting to acquire leader lease kube-system/aws-load-balancer-controller-leader...
I0525 07:03:32.302434       1 leaderelection.go:258] successfully acquired lease kube-system/aws-load-balancer-controller-leader
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"ingress","source":"channel source: 0xc0008cbe00"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"ingress","source":"channel source: 0xc0008cbe50"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"ingress","source":"kind source: *v1.Ingress"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"ingress","source":"kind source: *v1.Service"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"ingress","source":"channel source: 0xc0008cbea0"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"ingress","source":"channel source: 0xc0008cbef0"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"ingress","source":"kind source: *v1beta1.IngressClassParams"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"ingress","source":"kind source: *v1.IngressClass"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting Controller","controller":"ingress"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"targetGroupBinding","controllerGroup":"elbv2.k8s.aws","controllerKind":"TargetGroupBinding","source":"kind source: *v1beta1.TargetGroupBinding"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"targetGroupBinding","controllerGroup":"elbv2.k8s.aws","controllerKind":"TargetGroupBinding","source":"kind source: *v1.Service"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"targetGroupBinding","controllerGroup":"elbv2.k8s.aws","controllerKind":"TargetGroupBinding","source":"kind source: *v1.Endpoints"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"targetGroupBinding","controllerGroup":"elbv2.k8s.aws","controllerKind":"TargetGroupBinding","source":"kind source: *v1.Node"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting Controller","controller":"targetGroupBinding","controllerGroup":"elbv2.k8s.aws","controllerKind":"TargetGroupBinding"} 
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting EventSource","controller":"service","source":"kind source: *v1.Service"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting Controller","controller":"service"}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting workers","controller":"service","worker count":3}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting workers","controller":"targetGroupBinding","controllerGroup":"elbv2.k8s.aws","controllerKind":"TargetGroupBinding","worker count":3}
{"level":"info","ts":"2024-05-25T07:03:32Z","msg":"Starting workers","controller":"ingress","worker count":3}
{"level":"error","ts":"2024-05-25T07:03:32Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"f8ce3b2f-0b3e-4280-939e-e8e248b105b8","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:32Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"2596f6d0-acea-4381-8851-613cdf4cbd33","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:32Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"9eeef46b-8b51-4979-a8a0-abbced42d69d","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:32Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"4ffa8d74-4d9f-451c-9d81-f8be8b44ba60","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:32Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"dbc63044-1d40-4785-8059-4484756d66f9","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:32Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"1e756128-e9f4-4e04-a3cc-770cd3058681","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:32Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"e9daafcf-ee27-4550-9b69-27bd9d9e1f11","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:33Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"f23d62a8-3747-4bf0-8076-be1c29a51b53","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:33Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"5f5043cb-09b3-4886-b172-26470c4f3663","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:35Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"61936538-d5bb-4388-938a-01fa3466d946","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:37Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"39bd7498-99dc-4d68-8ae0-50d879180c1a","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"error","ts":"2024-05-25T07:03:42Z","msg":"Reconciler error","controller":"ingress","object":{"name":"ingress-url-shortener","namespace":"default"},"namespace":"default","name":"ingress-url-shortener","reconcileID":"28f0fb3d-bc69-4cbd-a41a-b2609f6cb1a7","error":"Internal error occurred: failed calling webhook \"vingress.elbv2.k8s.aws\": failed to call webhook: Post \"https://aws-load-balancer-webhook-service.kube-system.svc:443/validate-networking-v1-ingress?timeout=10s\": no endpoints available for service \"aws-load-balancer-webhook-service\""}
{"level":"info","ts":"2024-05-25T07:03:53Z","logger":"backend-sg-provider","msg":"created SecurityGroup","name":"k8s-traffic-urlshortenerclusteriac-48a3e0ab4e","id":"sg-0cbd321de40f85940"}
{"level":"info","ts":"2024-05-25T07:03:53Z","logger":"controllers.ingress","msg":"Auto Create SG","LB SGs":[{"$ref":"#/resources/AWS::EC2::SecurityGroup/ManagedLBSecurityGroup/status/groupID"},"sg-0cbd321de40f85940"],"backend SG":"sg-0cbd321de40f85940"}
{"level":"info","ts":"2024-05-25T07:03:53Z","logger":"controllers.ingress","msg":"successfully built model","model":"{\"id\":\"default/ingress-url-shortener\",\"resources\":{\"AWS::EC2::SecurityGroup\":{\"ManagedLBSecurityGroup\":{\"spec\":{\"groupName\":\"k8s-default-ingressu-b9731270a4\",\"description\":\"[k8s] Managed SecurityGroup for LoadBalancer\",\"ingress\":[{\"ipProtocol\":\"tcp\",\"fromPort\":80,\"toPort\":80,\"ipRanges\":[{\"cidrIP\":\"0.0.0.0/0\"}]}]}}},\"AWS::ElasticLoadBalancingV2::Listener\":{\"80\":{\"spec\":{\"loadBalancerARN\":{\"$ref\":\"#/resources/AWS::ElasticLoadBalancingV2::LoadBalancer/LoadBalancer/status/loadBalancerARN\"},\"port\":80,\"protocol\":\"HTTP\",\"defaultActions\":[{\"type\":\"fixed-response\",\"fixedResponseConfig\":{\"contentType\":\"text/plain\",\"statusCode\":\"404\"}}]}}},\"AWS::ElasticLoadBalancingV2::ListenerRule\":{\"80:1\":{\"spec\":{\"listenerARN\":{\"$ref\":\"#/resources/AWS::ElasticLoadBalancingV2::Listener/80/status/listenerARN\"},\"priority\":1,\"actions\":[{\"type\":\"fixed-response\",\"fixedResponseConfig\":{\"contentType\":\"text/plain\",\"messageBody\":\"Backend service does not exist\",\"statusCode\":\"503\"}}],\"conditions\":[{\"field\":\"path-pattern\",\"pathPatternConfig\":{\"values\":[\"/url-shortener\"]}}]}},\"80:2\":{\"spec\":{\"listenerARN\":{\"$ref\":\"#/resources/AWS::ElasticLoadBalancingV2::Listener/80/status/listenerARN\"},\"priority\":2,\"actions\":[{\"type\":\"fixed-response\",\"fixedResponseConfig\":{\"contentType\":\"text/plain\",\"messageBody\":\"Backend service does not exist\",\"statusCode\":\"503\"}}],\"conditions\":[{\"field\":\"path-pattern\",\"pathPatternConfig\":{\"values\":[\"/url-shortener-auth\"]}}]}}},\"AWS::ElasticLoadBalancingV2::LoadBalancer\":{\"LoadBalancer\":{\"spec\":{\"name\":\"k8s-default-ingressu-a4edebada1\",\"type\":\"application\",\"scheme\":\"internet-facing\",\"ipAddressType\":\"ipv4\",\"subnetMapping\":[{\"subnetID\":\"subnet-08c28b951ab0e8a7d\"},{\"subnetID\":\"subnet-0b8eadb3b8b0bd2a4\"}],\"securityGroups\":[{\"$ref\":\"#/resources/AWS::EC2::SecurityGroup/ManagedLBSecurityGroup/status/groupID\"},\"sg-0cbd321de40f85940\"]}}}}}"}
{"level":"info","ts":"2024-05-25T07:03:55Z","logger":"controllers.ingress","msg":"creating securityGroup","resourceID":"ManagedLBSecurityGroup"}
{"level":"info","ts":"2024-05-25T07:03:55Z","logger":"controllers.ingress","msg":"created securityGroup","resourceID":"ManagedLBSecurityGroup","securityGroupID":"sg-0666306feacf10d47"}
{"level":"info","ts":"2024-05-25T07:03:55Z","msg":"authorizing securityGroup ingress","securityGroupID":"sg-0666306feacf10d47","permission":[{"FromPort":80,"IpProtocol":"tcp","IpRanges":[{"CidrIp":"0.0.0.0/0","Description":""}],"Ipv6Ranges":null,"PrefixListIds":null,"ToPort":80,"UserIdGroupPairs":null}]}
{"level":"info","ts":"2024-05-25T07:03:55Z","msg":"authorized securityGroup ingress","securityGroupID":"sg-0666306feacf10d47"}
{"level":"info","ts":"2024-05-25T07:03:55Z","logger":"controllers.ingress","msg":"creating loadBalancer","stackID":"default/ingress-url-shortener","resourceID":"LoadBalancer"}    
{"level":"info","ts":"2024-05-25T07:03:56Z","logger":"controllers.ingress","msg":"created loadBalancer","stackID":"default/ingress-url-shortener","resourceID":"LoadBalancer","arn":"arn:aws:elasticloadbalancing:ap-southeast-1:271407076537:loadbalancer/app/k8s-default-ingressu-a4edebada1/fbb87a0c20617bff"}
{"level":"info","ts":"2024-05-25T07:03:56Z","logger":"controllers.ingress","msg":"creating listener","stackID":"default/ingress-url-shortener","resourceID":"80"}
{"level":"info","ts":"2024-05-25T07:03:56Z","logger":"controllers.ingress","msg":"created listener","stackID":"default/ingress-url-shortener","resourceID":"80","arn":"arn:aws:elasticloadbalancing:ap-southeast-1:271407076537:listener/app/k8s-default-ingressu-a4edebada1/fbb87a0c20617bff/abdcce6c669341fd"}
{"level":"info","ts":"2024-05-25T07:03:56Z","logger":"controllers.ingress","msg":"creating listener rule","stackID":"default/ingress-url-shortener","resourceID":"80:1"}
{"level":"info","ts":"2024-05-25T07:03:56Z","logger":"controllers.ingress","msg":"created listener rule","stackID":"default/ingress-url-shortener","resourceID":"80:1","arn":"arn:aws:elasticloadbalancing:ap-southeast-1:271407076537:listener-rule/app/k8s-default-ingressu-a4edebada1/fbb87a0c20617bff/abdcce6c669341fd/b7bb9e762bd6a68b"}
{"level":"info","ts":"2024-05-25T07:03:56Z","logger":"controllers.ingress","msg":"creating listener rule","stackID":"default/ingress-url-shortener","resourceID":"80:2"}
{"level":"info","ts":"2024-05-25T07:03:57Z","logger":"controllers.ingress","msg":"created listener rule","stackID":"default/ingress-url-shortener","resourceID":"80:2","arn":"arn:aws:elasticloadbalancing:ap-southeast-1:271407076537:listener-rule/app/k8s-default-ingressu-a4edebada1/fbb87a0c20617bff/abdcce6c669341fd/7f1361dd0644f0ce"}
{"level":"info","ts":"2024-05-25T07:03:57Z","logger":"controllers.ingress","msg":"successfully deployed model","ingressGroup":"default/ingress-url-shortener"}